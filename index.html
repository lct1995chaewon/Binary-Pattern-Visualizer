<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>N 位元二進值範圍 ｜ Binary Pattern Visualizer</title>
<style>
:root{
  --bg:#f6f9ff;
  --panel:#fff;
  --accent-dark:#3f51b5;
  --blue:#1565c0;
  --red:#d32f2f;
  --gold:#f9a825;
  --line:#666;
}
body{
  font-family:"Noto Sans TC","Segoe UI",sans-serif;
  background:var(--bg);
  margin:0;
  padding:26px 10px;
  display:flex;
  justify-content:center;
}
.container{
  background:var(--panel);
  border-radius:14px;
  box-shadow:0 6px 18px #0001;
  padding:24px;
  max-width:720px;
  width:100%;
  text-align:center;
}
h1{
  color:var(--accent-dark);
  margin-bottom:14px;
}
.n-control{
  display:inline-flex;
  align-items:center;
  background:#eef1ff;
  border-radius:10px;
  padding:8px 14px;
  gap:10px;
}
.n-box{
  font-weight:bold;
  font-size:22px;
  width:60px;
  text-align:center;
  border:none;
  border-radius:6px;
  box-shadow:inset 0 0 0 2px #ccc;
  background:#fff;
}
.btn{
  background:var(--accent-dark);
  color:#fff;
  width:30px;height:30px;
  border-radius:50%;
  display:flex;align-items:center;justify-content:center;
  cursor:pointer;font-size:18px;
  transition:.2s;
}
.btn:hover{background:#273497;}
.section{
  text-align:center;
  border-radius:12px;
  padding:14px 8px;
  margin-top:14px;
}
#unsigned{background:#fff6d6;}
#twos{background:#e8f3ff;}
.section h2{margin-top:0;font-size:20px;}
.row{
  display:flex;
  flex-wrap:wrap;
  justify-content:center;
  align-items:center;
  gap:8px;
  margin:6px 0;
}
label{font-size:16px;color:#555;}
input{
  font-family:"JetBrains Mono",monospace;
  font-size:18px;
  text-align:center;
  border:none;
  border-radius:5px;
  background:#fafbff;
  padding:5px 8px;
  min-width:140px;
}
.value-blue{color:var(--blue);}
.value-red{color:var(--red);}

/* --- aligned grid frame --- */
.weight-frame{
  margin-top:26px;
  border-top:2px solid var(--line);
  border-bottom:2px solid var(--line);
  display:grid;
  justify-content:center;
  gap:0;
  grid-auto-columns:60px;
  grid-auto-flow:column;
  overflow-x:auto;
  padding:8px 0;
}
.column{
  border-left:1px solid var(--line);
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  padding:4px 0;
}
.column:last-child{border-right:1px solid var(--line);}
.weight{
  font-family:"JetBrains Mono",monospace;
  font-size:18px;
  font-weight:600;
  line-height:1.2;
}
.bit{
  font-family:"JetBrains Mono",monospace;
  font-size:14px;
  color:#555;
  margin-top:4px;
}
.negative{color:var(--red);}
.positive{color:var(--gold);}
footer{
  margin-top:22px;
  font-size:13px;
  color:#777;
}
@media(max-width:560px){
  .weight-frame{grid-auto-columns:48px;}
  .weight{font-size:16px;}
  .bit{font-size:12px;}
}
</style>
</head>
<body>
<div class="container">
  <h1>N 位元二進值範圍 (Unsigned & 2’s Complement)</h1>

  <div class="n-control">
    <span>位元 n =</span>
    <input id="bits" class="n-box" type="text" value="6" readonly>
    <div id="up" class="btn">▲</div>
    <div id="down" class="btn">▼</div>
  </div>

  <div id="unsigned" class="section">
    <h2>無號整數 (Unsigned)</h2>
    <div class="row">
      <label>最小值：</label>
      <input id="u-min-bin" readonly>
      <input id="u-min-dec" class="value-blue" readonly>
    </div>
    <div class="row">
      <label>最大值：</label>
      <input id="u-max-bin" readonly>
      <input id="u-max-dec" class="value-red" readonly>
    </div>
  </div>

  <div id="twos" class="section">
    <h2>二的補數 (2’s Complement)</h2>
    <div class="row">
      <label>最小值：</label>
      <input id="t-min-bin" readonly>
      <input id="t-min-dec" class="value-blue" readonly>
    </div>
    <div class="row">
      <label>最大值：</label>
      <input id="t-max-bin" readonly>
      <input id="t-max-dec" class="value-red" readonly>
    </div>
  </div>

  <div id="weights" class="weight-frame"></div>

  <footer>© 2025 Binary Pattern Visualizer ｜ lct1995chaewon × GPT‑5 Chat</footer>
</div>

<script>
const bitsEl=document.getElementById("bits");
const up=document.getElementById("up");
const down=document.getElementById("down");
const uMinBin=document.getElementById("u-min-bin");
const uMinDec=document.getElementById("u-min-dec");
const uMaxBin=document.getElementById("u-max-bin");
const uMaxDec=document.getElementById("u-max-dec");
const tMinBin=document.getElementById("t-min-bin");
const tMinDec=document.getElementById("t-min-dec");
const tMaxBin=document.getElementById("t-max-bin");
const tMaxDec=document.getElementById("t-max-dec");
const weights=document.getElementById("weights");

let n=6;update();

up.onclick=()=>{ if(n<16){ n++; update(); } };
down.onclick=()=>{ if(n>1){ n--; update(); } };

function update(){
  bitsEl.value=n;
  // unsigned
  const uMax=Math.pow(2,n)-1;
  uMinBin.value="0".repeat(n);
  uMinDec.value="0";
  uMaxBin.value=uMax.toString(2).padStart(n,"0");
  uMaxDec.value=uMax;
  // 2’s complement
  const tMin=-Math.pow(2,n-1);
  const tMax=Math.pow(2,n-1)-1;
  tMinBin.value=toTwos(tMin,n);
  tMinDec.value=tMin;
  tMaxBin.value=toTwos(tMax,n);
  tMaxDec.value=tMax;
  drawGrid();
}
function toTwos(val,bits){
  if(val>=0)return val.toString(2).padStart(bits,"0");
  const mod=Math.pow(2,bits);
  return (mod+val).toString(2).padStart(bits,"1");
}
function drawGrid(){
  weights.innerHTML="";
  for(let i=n-1;i>=0;i--){
    const div=document.createElement("div");
    div.className="column";
    const weight=document.createElement("div");
    weight.className="weight "+(i===n-1?"negative":"positive");
    const val=(i===n-1)?-Math.pow(2,i):Math.pow(2,i);
    weight.textContent=val;
    const bit=document.createElement("div");
    bit.className="bit";
    bit.textContent=(i+1)+"bit";
    div.appendChild(weight);
    div.appendChild(bit);
    weights.appendChild(div);
  }
}
</script>
</body>
</html>
